<?xml version="1.0" encoding="UTF-8"?>
<PharmML implementedBy="http://infix2pharmml.sourceforge.net" writtenVersion="0.7.1" xmlns="http://www.pharmml.org/pharmml/0.7/PharmML" xmlns:ct="http://www.pharmml.org/pharmml/0.7/CommonTypes" xmlns:ds="http://www.pharmml.org/pharmml/0.7/Dataset" xmlns:math="http://www.pharmml.org/pharmml/0.7/Maths" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.pharmml.org/pharmml/0.7/PharmML http://www.pharmml.org/pharmml/0.7/PharmML">
  <ct:Name>Chen_2009_BiophysJ_Exocytosis - generated by infix2pharmml</ct:Name>
  <ct:Description>Yi-der Chen, Shaokun Wang, and Arthur Sherman, Identifying the Targets of the Amplifying Pathway for Insulin Secretion in Pancreatic Beta-Cells by Kinetic Modeling of Granule Exocytosis. doi:10.1529/biophysj.107.124990 - Generated by infix2pharmml.sourceforge.net on Thu Sep 12 14:41:54 2019.</ct:Description>
  <!-- Translation of: 
       par Vrest=-70, Vburst=-20
par tstep=0.0, ton=12.0, toff=12.0
par GlucFact=1.2
par fmd=0.01, fi=0.01, B=200, fv=0.00365
par alpha=5.18e-15, vmd=4.2e-15, vcell=1.15e-12
par gL=250, Vm=-20, Vca=25, sm=5
par Jsercamax=41.0, Kserca=0.27, Jpmcamax=21.0, Kpmca=0.5, Jleak=-0.94, Jncx0=18.67
par k1=20, km1=100, r1=0.6, rm1=1, r20=0.006, rm2=0.001
par r30=1.205, rm3=0.0001, u1=2000, u2=3, u3=0.02
par Kp=2.3, Kp2=2.3

par tau=2.0
par tcycle= ton + toff
par ts=60

IL:=gL*minf(v=V)*(V-Vca)                    {Current through L-type channel}
IR:=0.25*IL                                 {Current through R-type channel}

JL:=alpha*IL/vmd                            {Ion flux through L-type channel}
JR:=alpha*IR/vcell                          {Ion flux through R-type channel}

Jserca := Jsercamax*Ci^2/(Kserca^2 + Ci^2)  {Pumps and stores:  eq (6). Probably rewritten to avoid null denominators}
Jpmca := Jpmcamax*Ci/(Kpmca + Ci)
Jncx := Jncx0*(Ci - 0.25)
L:=Jserca + Jpmca + Jncx + Jleak            {TG: clearance from cytosol}

V:=Vrest + (Vburst - Vrest)*(heavx(x=modulus(a=t, b=tcycle)) - heavx(x=modulus(a=t,b=tcycle) - toff)) 
                                            {Membrane potential, a square source}


par Cmd_init=0.0674
par Ci_init=0.06274

diff(Cmd,t):= ts*(-fmd*JL - fmd*B*(Cmd - Ci))          {Microdomain [Ca++]}
diff(Ci,t):= ts*(-fi*JR + fv*fi*B*(Cmd - Ci) - fi*L)   {Cytosol [Ca++]}

r2:=r20*Ci/(Ci + Kp2)                                  {Rates depending on cytosol calcium}
r3:=GlucFact*r30*Ci/(Ci + Kp)                          {Rates depending on cytosol calcium and glucose}

par N1_init=14.71376
par N2_init=0.612519
par N3_init=0.0084499
par N4_init=5.098857e-6
par N5_init=24.539936
par N6_init=218.017777
par NF_init=0.003399
par NR_init=0.50988575
par SE_init=0.0

diff(N1,t):= ts*(-(3*k1*Cmd + rm1)*N1 + km1*N2 + r1*N5)        {Primed granules}
diff(N2,t):= ts*(3*k1*Cmd*N1 -(2*k1*Cmd + km1)*N2 + 2*km1*N3)  {Bound granules}
diff(N3,t):= ts*(2*k1*Cmd*N2 -(2*km1 + k1*Cmd)*N3 + 3*km1*N4)  {Triggered granules}
diff(N4,t):= ts*(k1*Cmd*N3 - (3*km1 + u1)*N4)                  {Fused granules}
diff(N5,t):= ts*(rm1*N1 - (r1 + rm2)*N5 + r2*N6)               {Primed granules}
diff(N6,t):= ts*(r3 + rm2*N5 - (rm3 + r2)*N6)                  {Docked granules}
diff(NF,t):= ts*(u1*N4 - u2*NF)                                {Fused granules}
diff(NR,t):= ts*(u2*NF - u3*NR)                                {Releasing granules}

diff(SE,t):= ts*(u3*NR)                                        {Secretion}

docked := N6 + N5 + N1
primed := N5 + N1


 -->
  <IndependentVariable symbId="t"/>
  <!-- Insert FunctionDefinition here -->
  <ct:FunctionDefinition symbId="heavx" symbolType="real">
    <ct:Description>Function: heavx</ct:Description>
    <ct:FunctionArgument symbId="x" symbolType="real"/>
    <ct:Definition>
      <ct:Assign>
        <math:Binop op="divide">
          <math:Binop op="plus">
            <math:Uniop op="abs">
              <ct:SymbRef symbIdRef="x"/>
            </math:Uniop>
            <ct:SymbRef symbIdRef="x"/>
          </math:Binop>
          <math:Binop op="plus">
            <math:Binop op="times">
              <ct:Real>2</ct:Real>
              <math:Uniop op="abs">
                <ct:SymbRef symbIdRef="x"/>
              </math:Uniop>
            </math:Binop>
            <ct:Real>1e-5</ct:Real>
          </math:Binop>
        </math:Binop>
      </ct:Assign>
    </ct:Definition>
  </ct:FunctionDefinition>
  <ct:FunctionDefinition symbId="modulus" symbolType="real">
    <ct:Description>Function: modulus</ct:Description>
    <ct:FunctionArgument symbId="a" symbolType="real"/>
    <ct:FunctionArgument symbId="b" symbolType="real"/>
    <ct:Definition>
      <ct:Assign>
        <math:Binop op="minus">
          <ct:SymbRef symbIdRef="a"/>
          <math:Binop op="times">
            <ct:SymbRef symbIdRef="b"/>
            <math:Uniop op="floor">
              <math:Binop op="divide">
                <ct:SymbRef symbIdRef="a"/>
                <ct:SymbRef symbIdRef="b"/>
              </math:Binop>
            </math:Uniop>
          </math:Binop>
        </math:Binop>
      </ct:Assign>
    </ct:Definition>
  </ct:FunctionDefinition>
  <ct:FunctionDefinition symbId="minf" symbolType="real">
    <ct:Description>Function: minf</ct:Description>
    <ct:FunctionArgument symbId="v" symbolType="real"/>
    <ct:Definition>
      <ct:Assign>
        <math:Binop op="divide">
          <ct:Real>1</ct:Real>
          <math:Binop op="plus">
            <ct:Real>1</ct:Real>
            <math:Uniop op="exp">
              <math:Binop op="divide">
                <math:Binop op="minus">
                  <ct:SymbRef symbIdRef="Vm"/>
                  <ct:SymbRef symbIdRef="V"/>
                </math:Binop>
                <ct:SymbRef symbIdRef="sm"/>
              </math:Binop>
            </math:Uniop>
          </math:Binop>
        </math:Binop>
      </ct:Assign>
    </ct:Definition>
  </ct:FunctionDefinition>
  <ModelDefinition xmlns="http://www.pharmml.org/pharmml/0.7/ModelDefinition">
    <ParameterModel blkId="p">
      <PopulationParameter symbId="Jpmcamax">
        <ct:Assign>
          <ct:Real>21.0</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Kpmca">
        <ct:Assign>
          <ct:Real>0.5</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="ton">
        <ct:Assign>
          <ct:Real>12.0</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="u1">
        <ct:Assign>
          <ct:Real>2000</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Jncx0">
        <ct:Assign>
          <ct:Real>18.67</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="k1">
        <ct:Assign>
          <ct:Real>20</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="vmd">
        <ct:Assign>
          <ct:Real>4.2e-15</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="r30">
        <ct:Assign>
          <ct:Real>1.205</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="sm">
        <ct:Assign>
          <ct:Real>5</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="fv">
        <ct:Assign>
          <ct:Real>0.00365</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="NR_init">
        <ct:Assign>
          <ct:Real>0.50988575</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Vm">
        <ct:Assign>
          <math:Uniop op="minus">
            <ct:Real>20</ct:Real>
          </math:Uniop>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Ci_init">
        <ct:Assign>
          <ct:Real>0.06274</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="rm2">
        <ct:Assign>
          <ct:Real>0.001</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="SE_init">
        <ct:Assign>
          <ct:Real>0.0</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="tau">
        <ct:Assign>
          <ct:Real>2.0</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="N4_init">
        <ct:Assign>
          <ct:Real>5.098857e-6</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="N2_init">
        <ct:Assign>
          <ct:Real>0.612519</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="ts">
        <ct:Assign>
          <ct:Real>60</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="rm1">
        <ct:Assign>
          <ct:Real>1</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Kp">
        <ct:Assign>
          <ct:Real>2.3</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="alpha">
        <ct:Assign>
          <ct:Real>5.18e-15</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Kserca">
        <ct:Assign>
          <ct:Real>0.27</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="r20">
        <ct:Assign>
          <ct:Real>0.006</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="GlucFact">
        <ct:Assign>
          <ct:Real>1.2</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Cmd_init">
        <ct:Assign>
          <ct:Real>0.0674</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="r1">
        <ct:Assign>
          <ct:Real>0.6</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="gL">
        <ct:Assign>
          <ct:Real>250</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Vca">
        <ct:Assign>
          <ct:Real>25</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Jleak">
        <ct:Assign>
          <math:Uniop op="minus">
            <ct:Real>0.94</ct:Real>
          </math:Uniop>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="tstep">
        <ct:Assign>
          <ct:Real>0.0</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="NF_init">
        <ct:Assign>
          <ct:Real>0.003399</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="u3">
        <ct:Assign>
          <ct:Real>0.02</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="u2">
        <ct:Assign>
          <ct:Real>3</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Jsercamax">
        <ct:Assign>
          <ct:Real>41.0</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="B">
        <ct:Assign>
          <ct:Real>200</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="N6_init">
        <ct:Assign>
          <ct:Real>218.017777</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="N5_init">
        <ct:Assign>
          <ct:Real>24.539936</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="tcycle">
        <ct:Assign>
          <math:Binop op="plus">
            <ct:SymbRef blkIdRef="p" symbIdRef="ton"/>
            <ct:SymbRef blkIdRef="p" symbIdRef="toff"/>
          </math:Binop>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="toff">
        <ct:Assign>
          <ct:Real>12.0</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Kp2">
        <ct:Assign>
          <ct:Real>2.3</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="fi">
        <ct:Assign>
          <ct:Real>0.01</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Vburst">
        <ct:Assign>
          <math:Uniop op="minus">
            <ct:Real>20</ct:Real>
          </math:Uniop>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="km1">
        <ct:Assign>
          <ct:Real>100</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="N1_init">
        <ct:Assign>
          <ct:Real>14.71376</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="fmd">
        <ct:Assign>
          <ct:Real>0.01</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="vcell">
        <ct:Assign>
          <ct:Real>1.15e-12</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="N3_init">
        <ct:Assign>
          <ct:Real>0.0084499</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="rm3">
        <ct:Assign>
          <ct:Real>0.0001</ct:Real>
        </ct:Assign>
      </PopulationParameter>
      <PopulationParameter symbId="Vrest">
        <ct:Assign>
          <math:Uniop op="minus">
            <ct:Real>70</ct:Real>
          </math:Uniop>
        </ct:Assign>
      </PopulationParameter>
    </ParameterModel>
    <!-- STRUCTURAL MODEL -->
    <StructuralModel blkId="sm">
      <!-- Cmd' (ODE) -->
      <ct:DerivativeVariable symbId="Cmd" symbolType="real">
        <ct:Description>Microdomain [Ca++]</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="minus">
              <math:Binop op="times">
                <math:Uniop op="minus">
                  <ct:SymbRef blkIdRef="p" symbIdRef="fmd"/>
                </math:Uniop>
                <ct:SymbRef symbIdRef="JL"/>
              </math:Binop>
              <math:Binop op="times">
                <math:Binop op="times">
                  <ct:SymbRef blkIdRef="p" symbIdRef="fmd"/>
                  <ct:SymbRef blkIdRef="p" symbIdRef="B"/>
                </math:Binop>
                <math:Binop op="minus">
                  <ct:SymbRef symbIdRef="Cmd"/>
                  <ct:SymbRef symbIdRef="Ci"/>
                </math:Binop>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="Cmd_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- Ci' (ODE) -->
      <ct:DerivativeVariable symbId="Ci" symbolType="real">
        <ct:Description>Cytosol [Ca++]</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="minus">
              <math:Binop op="plus">
                <math:Binop op="times">
                  <math:Uniop op="minus">
                    <ct:SymbRef blkIdRef="p" symbIdRef="fi"/>
                  </math:Uniop>
                  <ct:SymbRef symbIdRef="JR"/>
                </math:Binop>
                <math:Binop op="times">
                  <math:Binop op="times">
                    <math:Binop op="times">
                      <ct:SymbRef blkIdRef="p" symbIdRef="fv"/>
                      <ct:SymbRef blkIdRef="p" symbIdRef="fi"/>
                    </math:Binop>
                    <ct:SymbRef blkIdRef="p" symbIdRef="B"/>
                  </math:Binop>
                  <math:Binop op="minus">
                    <ct:SymbRef symbIdRef="Cmd"/>
                    <ct:SymbRef symbIdRef="Ci"/>
                  </math:Binop>
                </math:Binop>
              </math:Binop>
              <math:Binop op="times">
                <ct:SymbRef blkIdRef="p" symbIdRef="fi"/>
                <ct:SymbRef symbIdRef="L"/>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="Ci_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- N1' (ODE) -->
      <ct:DerivativeVariable symbId="N1" symbolType="real">
        <ct:Description>Primed granules</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="plus">
              <math:Binop op="plus">
                <math:Binop op="times">
                  <math:Uniop op="minus">
                    <math:Binop op="plus">
                      <math:Binop op="times">
                        <math:Binop op="times">
                          <ct:Real>3</ct:Real>
                          <ct:SymbRef blkIdRef="p" symbIdRef="k1"/>
                        </math:Binop>
                        <ct:SymbRef symbIdRef="Cmd"/>
                      </math:Binop>
                      <ct:SymbRef blkIdRef="p" symbIdRef="rm1"/>
                    </math:Binop>
                  </math:Uniop>
                  <ct:SymbRef symbIdRef="N1"/>
                </math:Binop>
                <math:Binop op="times">
                  <ct:SymbRef blkIdRef="p" symbIdRef="km1"/>
                  <ct:SymbRef symbIdRef="N2"/>
                </math:Binop>
              </math:Binop>
              <math:Binop op="times">
                <ct:SymbRef blkIdRef="p" symbIdRef="r1"/>
                <ct:SymbRef symbIdRef="N5"/>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="N1_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- N2' (ODE) -->
      <ct:DerivativeVariable symbId="N2" symbolType="real">
        <ct:Description>Bound granules</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="plus">
              <math:Binop op="minus">
                <math:Binop op="times">
                  <math:Binop op="times">
                    <math:Binop op="times">
                      <ct:Real>3</ct:Real>
                      <ct:SymbRef blkIdRef="p" symbIdRef="k1"/>
                    </math:Binop>
                    <ct:SymbRef symbIdRef="Cmd"/>
                  </math:Binop>
                  <ct:SymbRef symbIdRef="N1"/>
                </math:Binop>
                <math:Binop op="times">
                  <math:Binop op="plus">
                    <math:Binop op="times">
                      <math:Binop op="times">
                        <ct:Real>2</ct:Real>
                        <ct:SymbRef blkIdRef="p" symbIdRef="k1"/>
                      </math:Binop>
                      <ct:SymbRef symbIdRef="Cmd"/>
                    </math:Binop>
                    <ct:SymbRef blkIdRef="p" symbIdRef="km1"/>
                  </math:Binop>
                  <ct:SymbRef symbIdRef="N2"/>
                </math:Binop>
              </math:Binop>
              <math:Binop op="times">
                <math:Binop op="times">
                  <ct:Real>2</ct:Real>
                  <ct:SymbRef blkIdRef="p" symbIdRef="km1"/>
                </math:Binop>
                <ct:SymbRef symbIdRef="N3"/>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="N2_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- N3' (ODE) -->
      <ct:DerivativeVariable symbId="N3" symbolType="real">
        <ct:Description>Triggered granules</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="plus">
              <math:Binop op="minus">
                <math:Binop op="times">
                  <math:Binop op="times">
                    <math:Binop op="times">
                      <ct:Real>2</ct:Real>
                      <ct:SymbRef blkIdRef="p" symbIdRef="k1"/>
                    </math:Binop>
                    <ct:SymbRef symbIdRef="Cmd"/>
                  </math:Binop>
                  <ct:SymbRef symbIdRef="N2"/>
                </math:Binop>
                <math:Binop op="times">
                  <math:Binop op="plus">
                    <math:Binop op="times">
                      <ct:Real>2</ct:Real>
                      <ct:SymbRef blkIdRef="p" symbIdRef="km1"/>
                    </math:Binop>
                    <math:Binop op="times">
                      <ct:SymbRef blkIdRef="p" symbIdRef="k1"/>
                      <ct:SymbRef symbIdRef="Cmd"/>
                    </math:Binop>
                  </math:Binop>
                  <ct:SymbRef symbIdRef="N3"/>
                </math:Binop>
              </math:Binop>
              <math:Binop op="times">
                <math:Binop op="times">
                  <ct:Real>3</ct:Real>
                  <ct:SymbRef blkIdRef="p" symbIdRef="km1"/>
                </math:Binop>
                <ct:SymbRef symbIdRef="N4"/>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="N3_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- N4' (ODE) -->
      <ct:DerivativeVariable symbId="N4" symbolType="real">
        <ct:Description>Fused granules</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="minus">
              <math:Binop op="times">
                <math:Binop op="times">
                  <ct:SymbRef blkIdRef="p" symbIdRef="k1"/>
                  <ct:SymbRef symbIdRef="Cmd"/>
                </math:Binop>
                <ct:SymbRef symbIdRef="N3"/>
              </math:Binop>
              <math:Binop op="times">
                <math:Binop op="plus">
                  <math:Binop op="times">
                    <ct:Real>3</ct:Real>
                    <ct:SymbRef blkIdRef="p" symbIdRef="km1"/>
                  </math:Binop>
                  <ct:SymbRef blkIdRef="p" symbIdRef="u1"/>
                </math:Binop>
                <ct:SymbRef symbIdRef="N4"/>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="N4_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- N5' (ODE) -->
      <ct:DerivativeVariable symbId="N5" symbolType="real">
        <ct:Description>Primed granules</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="plus">
              <math:Binop op="minus">
                <math:Binop op="times">
                  <ct:SymbRef blkIdRef="p" symbIdRef="rm1"/>
                  <ct:SymbRef symbIdRef="N1"/>
                </math:Binop>
                <math:Binop op="times">
                  <math:Binop op="plus">
                    <ct:SymbRef blkIdRef="p" symbIdRef="r1"/>
                    <ct:SymbRef blkIdRef="p" symbIdRef="rm2"/>
                  </math:Binop>
                  <ct:SymbRef symbIdRef="N5"/>
                </math:Binop>
              </math:Binop>
              <math:Binop op="times">
                <ct:SymbRef symbIdRef="r2"/>
                <ct:SymbRef symbIdRef="N6"/>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="N5_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- N6' (ODE) -->
      <ct:DerivativeVariable symbId="N6" symbolType="real">
        <ct:Description>Docked granules</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="minus">
              <math:Binop op="plus">
                <ct:SymbRef symbIdRef="r3"/>
                <math:Binop op="times">
                  <ct:SymbRef blkIdRef="p" symbIdRef="rm2"/>
                  <ct:SymbRef symbIdRef="N5"/>
                </math:Binop>
              </math:Binop>
              <math:Binop op="times">
                <math:Binop op="plus">
                  <ct:SymbRef blkIdRef="p" symbIdRef="rm3"/>
                  <ct:SymbRef symbIdRef="r2"/>
                </math:Binop>
                <ct:SymbRef symbIdRef="N6"/>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="N6_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- NF' (ODE) -->
      <ct:DerivativeVariable symbId="NF" symbolType="real">
        <ct:Description>Fused granules</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="minus">
              <math:Binop op="times">
                <ct:SymbRef blkIdRef="p" symbIdRef="u1"/>
                <ct:SymbRef symbIdRef="N4"/>
              </math:Binop>
              <math:Binop op="times">
                <ct:SymbRef blkIdRef="p" symbIdRef="u2"/>
                <ct:SymbRef symbIdRef="NF"/>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="NF_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- NR' (ODE) -->
      <ct:DerivativeVariable symbId="NR" symbolType="real">
        <ct:Description>Releasing granules</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="minus">
              <math:Binop op="times">
                <ct:SymbRef blkIdRef="p" symbIdRef="u2"/>
                <ct:SymbRef symbIdRef="NF"/>
              </math:Binop>
              <math:Binop op="times">
                <ct:SymbRef blkIdRef="p" symbIdRef="u3"/>
                <ct:SymbRef symbIdRef="NR"/>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="NR_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- SE' (ODE) -->
      <ct:DerivativeVariable symbId="SE" symbolType="real">
        <ct:Description>Secretion</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="ts"/>
            <math:Binop op="times">
              <ct:SymbRef blkIdRef="p" symbIdRef="u3"/>
              <ct:SymbRef symbIdRef="NR"/>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
        <ct:IndependentVariable>
          <ct:SymbRef symbIdRef="t"/>
        </ct:IndependentVariable>
        <ct:InitialCondition>
          <ct:InitialValue>
            <ct:Assign>
              <ct:SymbRef blkIdRef="p" symbIdRef="SE_init"/>
            </ct:Assign>
          </ct:InitialValue>
        </ct:InitialCondition>
      </ct:DerivativeVariable>
      <!-- IL (Variable) -->
      <ct:Variable symbId="IL" symbolType="real">
        <ct:Description>Current through L-type channel</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <math:Binop op="times">
              <ct:SymbRef blkIdRef="p" symbIdRef="gL"/>
              <math:FunctionCall>
                <ct:SymbRef symbIdRef="minf"/>
                <math:FunctionArgument symbId="v">
                  <ct:Assign>
                    <ct:SymbRef symbIdRef="V"/>
                  </ct:Assign>
                </math:FunctionArgument>
              </math:FunctionCall>
            </math:Binop>
            <math:Binop op="minus">
              <ct:SymbRef symbIdRef="V"/>
              <ct:SymbRef blkIdRef="p" symbIdRef="Vca"/>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- IR (Variable) -->
      <ct:Variable symbId="IR" symbolType="real">
        <ct:Description>Current through R-type channel</ct:Description>
        <ct:Assign>
          <math:Binop op="times">
            <ct:Real>0.25</ct:Real>
            <ct:SymbRef symbIdRef="IL"/>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- JL (Variable) -->
      <ct:Variable symbId="JL" symbolType="real">
        <ct:Description>Ion flux through L-type channel</ct:Description>
        <ct:Assign>
          <math:Binop op="divide">
            <math:Binop op="times">
              <ct:SymbRef blkIdRef="p" symbIdRef="alpha"/>
              <ct:SymbRef symbIdRef="IL"/>
            </math:Binop>
            <ct:SymbRef blkIdRef="p" symbIdRef="vmd"/>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- JR (Variable) -->
      <ct:Variable symbId="JR" symbolType="real">
        <ct:Description>Ion flux through R-type channel</ct:Description>
        <ct:Assign>
          <math:Binop op="divide">
            <math:Binop op="times">
              <ct:SymbRef blkIdRef="p" symbIdRef="alpha"/>
              <ct:SymbRef symbIdRef="IR"/>
            </math:Binop>
            <ct:SymbRef blkIdRef="p" symbIdRef="vcell"/>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- Jserca (Variable) -->
      <ct:Variable symbId="Jserca" symbolType="real">
        <ct:Description>Pumps and stores:  eq (6). Probably rewritten to avoid null denominators</ct:Description>
        <ct:Assign>
          <math:Binop op="divide">
            <math:Binop op="times">
              <ct:SymbRef blkIdRef="p" symbIdRef="Jsercamax"/>
              <math:Binop op="power">
                <ct:SymbRef symbIdRef="Ci"/>
                <ct:Real>2</ct:Real>
              </math:Binop>
            </math:Binop>
            <math:Binop op="plus">
              <math:Binop op="power">
                <ct:SymbRef blkIdRef="p" symbIdRef="Kserca"/>
                <ct:Real>2</ct:Real>
              </math:Binop>
              <math:Binop op="power">
                <ct:SymbRef symbIdRef="Ci"/>
                <ct:Real>2</ct:Real>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- Jpmca (Variable) -->
      <ct:Variable symbId="Jpmca" symbolType="real">
        <ct:Assign>
          <math:Binop op="divide">
            <math:Binop op="times">
              <ct:SymbRef blkIdRef="p" symbIdRef="Jpmcamax"/>
              <ct:SymbRef symbIdRef="Ci"/>
            </math:Binop>
            <math:Binop op="plus">
              <ct:SymbRef blkIdRef="p" symbIdRef="Kpmca"/>
              <ct:SymbRef symbIdRef="Ci"/>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- Jncx (Variable) -->
      <ct:Variable symbId="Jncx" symbolType="real">
        <ct:Assign>
          <math:Binop op="times">
            <ct:SymbRef blkIdRef="p" symbIdRef="Jncx0"/>
            <math:Binop op="minus">
              <ct:SymbRef symbIdRef="Ci"/>
              <ct:Real>0.25</ct:Real>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- L (Variable) -->
      <ct:Variable symbId="L" symbolType="real">
        <ct:Description>TG: clearance from cytosol</ct:Description>
        <ct:Assign>
          <math:Binop op="plus">
            <math:Binop op="plus">
              <math:Binop op="plus">
                <ct:SymbRef symbIdRef="Jserca"/>
                <ct:SymbRef symbIdRef="Jpmca"/>
              </math:Binop>
              <ct:SymbRef symbIdRef="Jncx"/>
            </math:Binop>
            <ct:SymbRef blkIdRef="p" symbIdRef="Jleak"/>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- V (Variable) -->
      <ct:Variable symbId="V" symbolType="real">
        <ct:Description>Membrane potential, a square source</ct:Description>
        <ct:Assign>
          <math:Binop op="plus">
            <ct:SymbRef blkIdRef="p" symbIdRef="Vrest"/>
            <math:Binop op="times">
              <math:Binop op="minus">
                <ct:SymbRef blkIdRef="p" symbIdRef="Vburst"/>
                <ct:SymbRef blkIdRef="p" symbIdRef="Vrest"/>
              </math:Binop>
              <math:Binop op="minus">
                <math:FunctionCall>
                  <ct:SymbRef symbIdRef="heavx"/>
                  <math:FunctionArgument symbId="x">
                    <ct:Assign>
                      <math:FunctionCall>
                        <ct:SymbRef symbIdRef="modulus"/>
                        <math:FunctionArgument symbId="a">
                          <ct:Assign>
                            <ct:SymbRef symbIdRef="t"/>
                          </ct:Assign>
                        </math:FunctionArgument>
                        <math:FunctionArgument symbId="b">
                          <ct:Assign>
                            <ct:SymbRef blkIdRef="p" symbIdRef="tcycle"/>
                          </ct:Assign>
                        </math:FunctionArgument>
                      </math:FunctionCall>
                    </ct:Assign>
                  </math:FunctionArgument>
                </math:FunctionCall>
                <math:FunctionCall>
                  <ct:SymbRef symbIdRef="heavx"/>
                  <math:FunctionArgument symbId="x">
                    <ct:Assign>
                      <math:Binop op="minus">
                        <math:FunctionCall>
                          <ct:SymbRef symbIdRef="modulus"/>
                          <math:FunctionArgument symbId="a">
                            <ct:Assign>
                              <ct:SymbRef symbIdRef="t"/>
                            </ct:Assign>
                          </math:FunctionArgument>
                          <math:FunctionArgument symbId="b">
                            <ct:Assign>
                              <ct:SymbRef blkIdRef="p" symbIdRef="tcycle"/>
                            </ct:Assign>
                          </math:FunctionArgument>
                        </math:FunctionCall>
                        <ct:SymbRef blkIdRef="p" symbIdRef="toff"/>
                      </math:Binop>
                    </ct:Assign>
                  </math:FunctionArgument>
                </math:FunctionCall>
              </math:Binop>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- r2 (Variable) -->
      <ct:Variable symbId="r2" symbolType="real">
        <ct:Description>Rates depending on cytosol calcium</ct:Description>
        <ct:Assign>
          <math:Binop op="divide">
            <math:Binop op="times">
              <ct:SymbRef blkIdRef="p" symbIdRef="r20"/>
              <ct:SymbRef symbIdRef="Ci"/>
            </math:Binop>
            <math:Binop op="plus">
              <ct:SymbRef symbIdRef="Ci"/>
              <ct:SymbRef blkIdRef="p" symbIdRef="Kp2"/>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- r3 (Variable) -->
      <ct:Variable symbId="r3" symbolType="real">
        <ct:Description>Rates depending on cytosol calcium and glucose</ct:Description>
        <ct:Assign>
          <math:Binop op="divide">
            <math:Binop op="times">
              <math:Binop op="times">
                <ct:SymbRef blkIdRef="p" symbIdRef="GlucFact"/>
                <ct:SymbRef blkIdRef="p" symbIdRef="r30"/>
              </math:Binop>
              <ct:SymbRef symbIdRef="Ci"/>
            </math:Binop>
            <math:Binop op="plus">
              <ct:SymbRef symbIdRef="Ci"/>
              <ct:SymbRef blkIdRef="p" symbIdRef="Kp"/>
            </math:Binop>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- docked (Variable) -->
      <ct:Variable symbId="docked" symbolType="real">
        <ct:Assign>
          <math:Binop op="plus">
            <math:Binop op="plus">
              <ct:SymbRef symbIdRef="N6"/>
              <ct:SymbRef symbIdRef="N5"/>
            </math:Binop>
            <ct:SymbRef symbIdRef="N1"/>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
      <!-- primed (Variable) -->
      <ct:Variable symbId="primed" symbolType="real">
        <ct:Assign>
          <math:Binop op="plus">
            <ct:SymbRef symbIdRef="N5"/>
            <ct:SymbRef symbIdRef="N1"/>
          </math:Binop>
        </ct:Assign>
      </ct:Variable>
    </StructuralModel>
  </ModelDefinition>
</PharmML>
